<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<title>Triángulo controlado por WASD apuntando al ratón</title>
<style>
    body {
        height: 100vh;
        margin: 0;
        background: #b4b4b4;
        overflow: hidden;
    }

    #triangulo {
        width: 0;
        height: 0;
        border-left: 20px solid transparent;
        border-right: 20px solid transparent;
        border-bottom: 50px solid red;
        position: absolute;
        transform-origin: 50% 50%;
    }
</style>
</head>
<body>

<div id="triangulo"></div>

<script>
    const tri = document.getElementById("triangulo");

    // Posición inicial en el centro
    let posX = window.innerWidth / 2;
    let posY = window.innerHeight / 2;

    const speed = 5;
    const keys = { w: false, a: false, s: false, d: false };

    // Movimiento con WASD
    document.addEventListener("keydown", e => {
        if (keys[e.key.toLowerCase()] !== undefined) {
            keys[e.key.toLowerCase()] = true;
        }
    });

    document.addEventListener("keyup", e => {
        if (keys[e.key.toLowerCase()] !== undefined) {
            keys[e.key.toLowerCase()] = false;
        }
    });

    // Guardamos la posición del ratón
    let mouseX = 0;
    let mouseY = 0;

    document.addEventListener("mousemove", e => {
        mouseX = e.clientX;
        mouseY = e.clientY;
    });

    function update() {
        // Mover personaje
        if (keys.w) posY -= speed;
        if (keys.s) posY += speed;
        if (keys.a) posX -= speed;
        if (keys.d) posX += speed;

        // Calcular ángulo hacia el ratón
        const angle = Math.atan2(mouseY - posY, mouseX - posX);
        const degrees = angle * 180 / Math.PI + 90;

        // Aplicar transformaciones
        tri.style.transform = `translate(-50%, -50%) rotate(${degrees}deg)`;
        tri.style.left = posX + "px";
        tri.style.top = posY + "px";

        requestAnimationFrame(update);
    }

    update();
</script>

</body>
</html>
